<h1>Создание контроллера веб-странц</h1>

<p>Контроллер веб-страницы - это класс, расширяющий базовый класс <code>\App\Telenok\Core\Controller\Frontend\Controller</code> как показано ниже</p>

<pre>
    <code class="php">
    class MyController extends \App\Telenok\Core\Controller\Frontend\Controller {}
    </code>
</pre>

<p>
В конструкторе базового класса для всех шаблонов отображения создается переменная <code>$controllerAction</code>, 
которая содержит объект активного контроллера, обрабатывающего GET, POST и другие запросы и указанного в определении роутера.
</p>

<pre>
    <code class="php">
    \Route::get('some-path', array('as' => 'some.name.route', 'uses' => "\App\MyNamespace\Controller@getContent"));
    </code>
</pre>

<p>
В приведенном примере активный контроллер <code>$controllerAction</code> - это объект, созданный из класса \App\MyNamespace\Controller.
</p>

<p>
    Воспользоваться переменной можно в шаблоне для добавления CSS, JS файлов или кода в блок <code>&lt;header&gt;&lt;/header&gt;</code> страницы и в других случаях следующим образом:
</p>

<pre>
    <code class="html">
    &lt;div class=&quot;content-wrapper&quot;&gt;
        &lt;div class=&quot;container&quot;&gt;
            &lt;div class=&quot;row&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
        
    $jsCode = &lt;&lt;&lt;EOF
    &lt;script&gt;
        jQuery(function()
        {
            jQuery('button.install-now').click(function()
            {
                var modal = jQuery(&quot;#installModalBox&quot;);
                var form = jQuery('form', modal);

                var domain = jQuery('input[name=&quot;domain_install&quot;]', modal).val();

                var link = document.createElement('a');
                link.setAttribute('href', domain); 

                domain = 'http://' + link.hostname + '/telenok/';

                form.attr('action', domain);
                form.submit();
            });
        });
    &lt;/script&gt;
    EOF;

    <span class="line">$controllerAction->addJsCode($jsCode);</span>
    </code>
</pre>

<p>В классе Контроллера веб-страницы Вы можете обратиться к объекту Request следующим образом для получения значения GET, POST и других типов запросов.</p>

<pre>
    <code class="php">
    // GET запрос
    $name = $this->getRequest()->get('name');
    
    // массив $_FILES
    $myFile = $this->getRequest()->file('some_file_name');

    // значение из массива $_REQUEST и значение по умолчанию
    $name = $this->getRequest()->input('name', 'John');
    
    // все параметры запроса
    $allParam = $this->getRequest()->input();

    // проверка присутствия параметра в запросе
    if ($this->getRequest()->has('some_var')) {}
    
    </code>
</pre>