<h1>Создание "Поля объекта"</h1>

<p>Каждый объект Базы данных в Вашем приложении содержит как минимум несколько обязательных полей вроде "Название", "Активность" и другие. 
    При помощи полей объекта Вы можете указать правила проверки данных при сохранении, минимальные или максимальные значение, значение по умолчанию и другие параметры.</p>

<p>Прмер создания нового поля объекта</p>

<pre>
    <code class="php">
    (new \App\Telenok\Core\Model\Object\Field())->storeOrUpdate([
        'title' => ['en' => 'Category', 'ru' => 'Категория'],
        'title_list' => ['en' => 'Categories', 'ru' => 'Категории'],
        'key' => 'relation-many-to-many',
        'code' => 'description',
        'active' => 1,
        'field_object_type' => 'product',
        'field_object_tab' => 'main',
        'relation_many_to_many_has' => 'category',
        'field_view' => 'core::field.integer-unsigned.model',
        'multilanguage' => 0,
        'show_in_form' => 1,
        'show_in_list' => 1,
        'allow_search' => 1,
        'allow_create' => 1,
        'allow_update' => 1,
        'field_order' => 8,
    ]);
    </code>
</pre>

<p>В поле "key" задается тип поля из зарегистрированных в приложении.</p>
<p>В поле "code" задается название-ключ поля. Вы не должны менять это значение для уже созданного поля.</p>

<p>В поле "field_object_type" указывается код или ID типа, которому это поле принадлежит.</p>

<p>В поле "field_object_tab" указывается код вкладки формы с данными объекта, в которой отображается поле.</p>
<p>В поле "field_view" указывается код шаблона поля для отображения в форме редактирования объекта. Если оставить поле пустым - будет использовано значение по умолчанию, 
    соответствующее опции в классе поля, например, для поля с кодом "integer" это значение равно "core::field.integer.model"</p>

<p>В поле "show_in_form" разрешается показ поля в форме.</p>
<p>В поле "show_in_list" разрешается показ поля в списке.</p>
<p>В поле "allow_search" разрешается поиск по полю в списке.</p>
<p>В поле "allow_create" разрешается сделать поле активным в форме при создании объекта. В противном случае поле получает аттрибут "disabled".</p>
<p>В поле "allow_update" разрешается сделать поле активным в форме при редактировании объекта. В противном случае поле получает аттрибут "disabled".</p>
<p>В поле "field_order" указывается номер поля в форме для показа в определенном порядке.</p>

<h2>Создание нового типа поля</h2>

<p>Вы можете создать новый тип поля по аналогии с существующими. В качестве примера смотрите классы простых полей типа "integer" или "string": 
\Telenok\Core\Field\Integer\Controller и \Telenok\Core\Field\String\Controller
</p>

<p>Созданный Вами тип поля необходимо зарегистрировать в системе, добавив слушателя события в ваш код. Обычно слушатели можно сохранить в файл event.php Вашего пакета и этот файл
 можно подключать в классе сервис-провайдера Вашего пакета</p>

<pre>
    <code class="php">
    \Event::listen('telenok.repository.objects-field', function($list)
    {
        $list->push('App\MyNamespace\Field\NiceField\Controller');
    });
    </code>
</pre>

<p>Пример подключения файла слушателей событий</p>
<pre>
    <code class="php">
use Illuminate\Support\ServiceProvider;

class MyPackageServiceProvider extends ServiceProvider {

    protected $defer = false;

    public function boot()
    {
        include __DIR__ . '/../../config/routes.php';
        <span class="line">include __DIR__ . '/../../config/event.php';</span>
    }
}
    </code>
</pre>